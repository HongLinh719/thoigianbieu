<!DOCTYPE html>

<html lang="vi">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Th·ªùi gian bi·ªÉu cho b√©</title>
<link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;600&amp;display=swap" rel="stylesheet"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet"/>

</head>
<body>
<div class="container">
<div class="header">
<h1>Th·ªùi gian bi·ªÉu cho b√©</h1>
</div>
<div class="date-container">
<div class="date-display" id="currentDate">H√¥m nay, 17/04/2025</div>
<div class="date-nav">
<button class="date-btn" onclick="changeDate(-1)"><i class="fas fa-chevron-left"></i></button>
<button class="date-btn" onclick="changeDate(1)"><i class="fas fa-chevron-right"></i></button>
</div>
</div>
<div class="tabs">
<div class="tab active" onclick="switchTab('tridung')">Tr√≠ D≈©ng (5 tu·ªïi)</div>
<div class="tab" onclick="switchTab('thaoVy')">Th·∫£o Vy (3 tu·ªïi)</div>
</div>
<div class="progress">
<div class="progress-bar" id="progressBar" style="width: 0%">0/16 ƒëi·ªÉm</div>
</div>
<div class="child-tab" id="tridung">
<div class="sleep-record" id="sleepRecord">
<div><i class="fas fa-bed"></i> Ng·ªß ƒë√™m qua:</div>
<div id="sleepStatus">Ch∆∞a c√≥ d·ªØ li·ªáu</div>
</div>
<div class="task-list">
<!-- Tasks will be added here dynamically -->
</div>
</div>
<div class="child-tab" id="thaoVy" style="display:none">
<div class="sleep-record" id="sleepRecordThaoVy">
<div><i class="fas fa-bed"></i> Ng·ªß ƒë√™m qua:</div>
<div id="sleepStatusThaoVy">Ch∆∞a c√≥ d·ªØ li·ªáu</div>
</div>
<div class="task-list">
<!-- Tasks will be added here dynamically -->
</div>
</div>
<div class="reward" id="reward">
<i class="fas fa-trophy"></i> Ch√∫c m·ª´ng! B√© ƒë√£ ho√†n th√†nh nhi·ªám v·ª• v√† ƒë∆∞·ª£c ph√©p ch∆°i thi·∫øt b·ªã ƒëi·ªán t·ª≠ t·ª´ 20:00 - 21:00
        </div>
</div>
<div class="notification" id="notification">
<i class="fas fa-bell"></i> ƒê·∫øn gi·ªù th·ª±c hi·ªán nhi·ªám v·ª• m·ªõi!
    </div>
<button class="stats-btn" onclick="toggleStats()">
<i class="fas fa-chart-bar"></i>
</button>
<div class="stats-modal" id="statsModal">
<div class="stats-content">
<div class="stats-header">
<h2>Th·ªëng k√™ ho·∫°t ƒë·ªông</h2>
<button class="stats-close" onclick="toggleStats()"><i class="fas fa-times"></i></button>
</div>
<div class="stats-chart" id="statsChart">
<!-- Chart bars will be added here -->
</div>
<div class="stats-summary">
<h3>T√≥m t·∫Øt 7 ng√†y qua</h3>
<p><strong>T·ªïng ƒëi·ªÉm:</strong> <span id="totalPoints">0</span> ƒëi·ªÉm</p>
<p><strong>ƒêi·ªÉm trung b√¨nh:</strong> <span id="averagePoints">0</span> ƒëi·ªÉm/ng√†y</p>
<p><strong>Ng√†y t·ªët nh·∫•t:</strong> <span id="bestDay">Ch∆∞a c√≥ d·ªØ li·ªáu</span></p>
<p><strong>S·ªë ng√†y ƒë∆∞·ª£c ch∆°i thi·∫øt b·ªã:</strong> <span id="deviceDays">0</span>/7 ng√†y</p>
</div>
</div>
</div>

<div id="popup-congrats" style="display:none; position:fixed; top:30%; left:50%; transform:translate(-50%, -50%); z-index:9999; text-align:center;">
<img alt="M·∫π Qu·ª≥nh" src="images/me_quynh.jpg" style="width:250px; border-radius:10px; box-shadow: 0 0 10px #888;"/>
<div id="popup-text" style="background:white; padding:10px; font-weight:bold; font-size:18px; margin-top:-5px;">B√© l√†m t·ªët l·∫Øm!</div>
</div>
<audio id="audio-congrats" preload="auto" src=""></audio>
<img id="watering-gif" src="images/water.gif" style="display:none; position:absolute; width:120px; top:350px; left:1190px; z-index:10;"/>
<!-- TH√äM ƒêO·∫†N N√ÄY -->
<div style="position: fixed; bottom: 500px; right: 340px; text-align: center; z-index: 50;">
<img id="tree-img" src="images/tree_day1.png" style="width:150px; height:150px;"/>
<div id="tree-status" style="font-weight:bold; color:#FF9800; margin:5px 0;">
        C√¢y c·∫ßn n∆∞·ªõc ƒë·ªÉ ph√°t tri·ªÉn!
    </div>
<div style="margin-top:5px; margin-bottom:10px;">
<span id="water-count" style="font-weight:bold; color:#2196F3;">üíß <span id="water-units">0</span> l∆∞·ª£t t∆∞·ªõi</span>
</div>
<button onclick="waterTree()">üíß B√© t∆∞·ªõi n∆∞·ªõc cho c√¢y</button>
</div>

function playCongrats(taskName) {
  const messages = {
    "ƒÉn t·ªëi t·∫°i nh√†": "audio/an_toi_tai_nha.mp3",
    "v·ªá sinh c√° nh√¢n bu·ªïi t·ªëi": "audio/ve_sinh_ca_nhan_buoi_toi.mp3",
    "ƒë·ªçc s√°ch, t√¥ m√†u ho·∫∑c l√†m to√°n": "audio/doc_sach_to_mau_hoac_lam_toan.mp3",
    "ƒëi ng·ªß": "audio/di_ngu.mp3",
    "th·ª©c d·∫≠y, v·ªá sinh c√° nh√¢n, ƒëi h·ªçc": "audio/thuc_day_ve_sinh_ca_nhan_di_hoc.mp3",
    "ch∆°i t·ª± do": "audio/choi_tu_do.mp3",
    "v·ªá sinh c√° nh√¢n s√°ng": "audio/ve_sinh_ca_nhan_sang.mp3",
    "ng·ªß ƒë√™m qua": "audio/ngu_dem_qua.mp3"
  };

  const audio = document.getElementById("audio-congrats");
  const popup = document.getElementById("popup-congrats");
  const popupText = document.getElementById("popup-text");

  audio.src = messages[taskName] || "";
  popupText.innerText = "Ch√∫c m·ª´ng anh V√≠t ho√†n th√†nh t·ªët nhi·ªám v·ª•: " + taskName;
  popup.style.display = "block";
  if (audio.src) {
    audio.play().catch(e =&gt; console.warn("Kh√¥ng th·ªÉ ph√°t audio:", e));
  }

  setTimeout(() =&gt; {
    popup.style.display = "none";
  }, 4500);
}
// C·∫≠p nh·∫≠t h√¨nh ·∫£nh c√¢y theo ng√†y trong tu·∫ßn
function updateTreeImage() {
    // X√°c ƒë·ªãnh c·∫•p ƒë·ªô c√¢y d·ª±a v√†o ng√†y trong tu·∫ßn
    const weekDay = new Date().getDay(); // 0: Ch·ªß Nh·∫≠t, 1: Th·ª© 2...
    
    // N·∫øu l√† ch·ªß nh·∫≠t, hi·ªÉn th·ªã c√¢y tr∆∞·ªüng th√†nh
    if (weekDay === 0) {
        document.getElementById("tree-img").src = "images/tree_day7.png";
        document.getElementById("tree-status").textContent = "C√¢y ƒë√£ tr∆∞·ªüng th√†nh ho√†n to√†n! Ch√∫c m·ª´ng b√©!";
        document.getElementById("tree-status").style.color = "#4CAF50";
    } else {
        // C√°c ng√†y kh√°c trong tu·∫ßn, hi·ªÉn th·ªã theo ti·∫øn ƒë·ªô
        // Th·ª© 2 (1) -&gt; c·∫•p ƒë·ªô 1, Th·ª© 3 (2) -&gt; c·∫•p ƒë·ªô 2, ..., Th·ª© 7 (6) -&gt; c·∫•p ƒë·ªô 6
        const expectedLevel = weekDay; // C·∫•p ƒë·ªô mong ƒë·ª£i cho ng√†y hi·ªán t·∫°i
        
        // Hi·ªÉn th·ªã c√¢y theo c·∫•p ƒë·ªô th·ª±c t·∫ø (kh√¥ng v∆∞·ª£t qu√° c·∫•p ƒë·ªô mong ƒë·ª£i)
        const displayLevel = Math.min(treeLevel, expectedLevel);
        document.getElementById("tree-img").src = `images/tree_day${displayLevel}.png`;
        
        // Hi·ªÉn th·ªã th√¥ng b√°o v·ªÅ tr·∫°ng th√°i c√¢y
        if (treeLevel &lt; expectedLevel) {
            document.getElementById("tree-status").textContent = "C√¢y c·∫ßn th√™m n∆∞·ªõc ƒë·ªÉ ph√°t tri·ªÉn!";
            document.getElementById("tree-status").style.color = "#FF9800";
        } else {
            document.getElementById("tree-status").textContent = "C√¢y ƒëang ph√°t tri·ªÉn t·ªët!";
            document.getElementById("tree-status").style.color = "#4CAF50";
        }
    }
}
// Bi·∫øn theo d√µi tr·∫°ng th√°i c√¢y v√† n∆∞·ªõc
let waterCredits = 0;       // S·ªë l∆∞·ª£t t∆∞·ªõi
let treeLevel = 1;          // C·∫•p ƒë·ªô c√¢y (1-7)
let currentWeekDay = 0;     // Ng√†y trong tu·∫ßn (0: Ch·ªß Nh·∫≠t, 1: Th·ª© 2...)

// S·ª≠a h√†m addWater ƒë·ªÉ tƒÉng s·ªë l∆∞·ª£t t∆∞·ªõi
// S·ª≠a h√†m addWater
function addWater(units) {
    // TƒÉng s·ªë l∆∞·ª£t t∆∞·ªõi
    waterCredits += units;
    
    // C·∫≠p nh·∫≠t UI ngay l·∫≠p t·ª©c
    document.getElementById("water-units").textContent = waterCredits;
    
    // Hi·ªÉn th·ªã th√¥ng b√°o
    const waterNotification = document.createElement("div");
    waterNotification.style.position = "fixed";
    waterNotification.style.bottom = "10px";
    waterNotification.style.left = "50%";
    waterNotification.style.transform = "translateX(-50%)";
    waterNotification.style.backgroundColor = "#2196F3";
    waterNotification.style.color = "white";
    waterNotification.style.padding = "10px 20px";
    waterNotification.style.borderRadius = "5px";
    waterNotification.style.zIndex = "9999";
    waterNotification.innerHTML = `<i class="fas fa-plus"></i> ƒê√£ th√™m ${units} l∆∞·ª£t t∆∞·ªõi n∆∞·ªõc!`;
    
    document.body.appendChild(waterNotification);
    
    setTimeout(() =&gt; {
        waterNotification.style.opacity = "0";
        waterNotification.style.transition = "opacity 0.5s";
        setTimeout(() =&gt; {
            document.body.removeChild(waterNotification);
        }, 500);
    }, 2000);
    
    // L∆∞u d·ªØ li·ªáu
    saveData();
    
    console.log("ƒê√£ th√™m", units, "l∆∞·ª£t t∆∞·ªõi, hi·ªán c√≥:", waterCredits);
}


// S·ª≠a h√†m waterTree() ƒë·ªÉ debug
function waterTree() {
    console.log("ƒêang t∆∞·ªõi c√¢y, s·ªë l∆∞·ª£t hi·ªán t·∫°i:", waterCredits);
    
    // Debug th√¥ng b√°o
    if (waterCredits &lt;= 0) {
        alert("Kh√¥ng ƒë·ªß l∆∞·ª£t t∆∞·ªõi n∆∞·ªõc! H√£y ho√†n th√†nh nhi·ªám v·ª• t·ªët ƒë·ªÉ c√≥ th√™m l∆∞·ª£t t∆∞·ªõi.");
        return;
    }
    
    // Gi·∫£m s·ªë l∆∞·ª£t t∆∞·ªõi v√† c·∫≠p nh·∫≠t ngay l·∫≠p t·ª©c
    waterCredits--;
    document.getElementById("water-units").textContent = waterCredits;
    
    // Hi·ªÉn th·ªã hi·ªáu ·ª©ng t∆∞·ªõi n∆∞·ªõc
    const wateringGif = document.getElementById("watering-gif");
    wateringGif.style.display = "block";
    
    // C·∫≠p nh·∫≠t c·∫•p ƒë·ªô c√¢y
    treeLevel = Math.min(treeLevel + 1, 7);
    
    // C·∫≠p nh·∫≠t h√¨nh ·∫£nh c√¢y sau 1.5 gi√¢y
    setTimeout(() =&gt; {
        document.getElementById("tree-img").src = `images/tree_day${treeLevel}.png`;
        wateringGif.style.display = "none";
        
        // Th√¥ng b√°o cho ng∆∞·ªùi d√πng bi·∫øt c√¢y ƒë√£ tƒÉng c·∫•p
        document.getElementById("tree-status").textContent = "C√¢y ƒë√£ ph√°t tri·ªÉn!";
        document.getElementById("tree-status").style.color = "#4CAF50";
        
        // L∆∞u d·ªØ li·ªáu
        saveData();
    }, 1500);
}


<script src="scripts/vitvy_full.js"></script></body>
</html>